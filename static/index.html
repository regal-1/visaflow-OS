<!doctype html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>VisaFlow OS</title>
    <link rel="preconnect" href="https://fonts.googleapis.com" />
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin />
    <link
      href="https://fonts.googleapis.com/css2?family=Inter:wght@400;500;600;700&family=IBM+Plex+Mono:wght@400;500&display=swap"
      rel="stylesheet"
    />
    <link rel="stylesheet" href="/static/styles.css" />
  </head>
  <body>
    <header class="header">
      <div>
        <h1>VisaFlow OS</h1>
        <p>Adaptive visa workflow prep for any school</p>
      </div>
      <div class="header-meta">
        <span id="school_label">School: not set</span>
        <span id="flow_label">Flow: not started</span>
        <span id="progress_text">Progress: Step 0 of 0</span>
      </div>
    </header>

    <main class="container">
      <nav class="tabs">
        <button class="tab active" data-tab="input">1. Input</button>
        <button class="tab" data-tab="process">2. Process</button>
        <button class="tab" data-tab="output">3. Output</button>
      </nav>

      <section class="tab-panel active" id="tab-input">
        <div class="grid-2">
          <article class="card">
            <h2>Step 1: Context</h2>
            <div class="form-grid">
              <label>
                School / University
                <input id="school_name_input" placeholder="UCLA, UCB, Cornell, Duke, Yale, etc." />
              </label>
              <label>
                Current Status
                <select id="status_type_input">
                  <option value="">Select</option>
                  <option value="f1">F-1</option>
                  <option value="opt">OPT</option>
                  <option value="stem_opt">STEM OPT</option>
                </select>
              </label>
              <label>
                Program Stage
                <select id="program_stage_input">
                  <option value="">Select</option>
                  <option value="enrolled">Enrolled</option>
                  <option value="graduating">Graduating</option>
                  <option value="graduated">Graduated</option>
                  <option value="working">Working</option>
                </select>
              </label>
              <label>
                Preferred View
                <select id="preferred_mode">
                  <option value="checklist">Checklist</option>
                  <option value="timeline">Timeline</option>
                  <option value="explain">Explain</option>
                </select>
              </label>
            </div>

            <h2>Step 2: Your Situation</h2>
            <label>
              Describe your case in plain language
              <textarea id="intent" rows="5">I am an international student and got an internship, but I do not know whether I need CPT or OPT.</textarea>
            </label>

            <button id="start_btn" class="primary">Generate My Plan</button>
          </article>

          <article class="card">
            <h2>Quick Start</h2>
            <div id="scenario_chips" class="chip-wrap"></div>

            <h3>Suggested Flows</h3>
            <ul id="candidate_flows" class="list"></ul>

            <div id="disambiguation_card" class="hint hidden">
              <h3>Choose Your Path</h3>
              <p id="disambiguation_prompt"></p>
              <div id="disambiguation_options" class="chip-wrap"></div>
            </div>
          </article>
        </div>
      </section>

      <section class="tab-panel" id="tab-process">
        <div class="process-top">
          <div class="mode-summary">
            <span class="chip solid" id="current_mode_chip">View: Checklist</span>
            <span class="muted" id="why_mode">We will guide you with the simplest next step.</span>
          </div>
          <div class="mode-row">
            <button class="mode-pill" data-manual-mode="checklist">Checklist</button>
            <button class="mode-pill" data-manual-mode="timeline">Timeline</button>
            <button class="mode-pill" data-manual-mode="explain">Explain</button>
          </div>
        </div>

        <div class="grid-2 process-grid">
          <article class="card">
            <h2>Your Steps</h2>
            <ul id="workflow_steps" class="list"></ul>
          </article>

          <article class="card">
            <h2>What To Do Next</h2>
            <div class="status-row">
              <span id="readiness_badge" class="badge needs">Needs Info</span>
              <span id="review_badge" class="badge neutral">In Progress</span>
            </div>
            <div id="adaptive_surface" class="surface"></div>

            <h3>Missing Before Advisor Review</h3>
            <ul id="missing_preview" class="list compact"></ul>
          </article>
        </div>
      </section>

      <section class="tab-panel" id="tab-output">
        <div class="grid-2">
          <article class="card">
            <h2>Required Details</h2>
            <div class="field-grid">
              <label>School Name <input data-field="school_name" class="case-field" /></label>
              <label>Status Type <input data-field="status_type" class="case-field" placeholder="f1 / opt / stem_opt" /></label>
              <label>Program Stage <input data-field="program_stage" class="case-field" placeholder="enrolled / graduating / graduated / working" /></label>
              <label>Employment Offer <input data-field="employment_offer" class="case-field" placeholder="yes/no" /></label>
              <label>Employer Name <input data-field="employer_name" class="case-field" /></label>
              <label>Work Start Date <input data-field="work_start_date" class="case-field" type="date" /></label>
              <label>Work End Date <input data-field="work_end_date" class="case-field" type="date" /></label>
              <label>Graduation Date <input data-field="graduation_date" class="case-field" type="date" /></label>
              <label>Petition Status <input data-field="petition_status" class="case-field" placeholder="filed / pending / unknown" /></label>
              <label>Documents Available <input data-field="documents_available" class="case-field" placeholder="i20, passport, offer_letter" /></label>
            </div>

            <h3>Still Needed</h3>
            <ul id="missing_items" class="list"></ul>
          </article>

          <article class="card">
            <h2>Full Output</h2>
            <h3>Personalized Checklist</h3>
            <ul id="final_checklist" class="list compact"></ul>

            <h3>Questions To Ask Advisor</h3>
            <ul id="advisor_questions" class="list compact"></ul>

            <h3>References</h3>
            <ul id="citations" class="list compact"></ul>

            <button id="generate_packet" class="primary">Generate Full Prep Packet</button>
            <pre id="packet_output"></pre>
          </article>
        </div>
      </section>
    </main>

    <footer class="footer">
      Workflow preparation assistant only. Not legal advice.
    </footer>

    <script src="/static/app.js"></script>
  </body>
</html>
